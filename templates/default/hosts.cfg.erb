# Generated by Chef
# This will be overwritten next time chef-client runs!
# host definitions

<% @nodes.each do |n| -%>
<% #unless n.name == node.name -%>
define host {
  use server
  address <%= n['ipaddress'] %>
  host_name <%= n['fqdn'] %>
<% if n.run_list.roles.nil? || n.run_list.roles.length == 0 -%>
  hostgroups all
<% else -%>
  hostgroups <%= n.run_list.roles.to_a.join(",") %><% if n.os == "linux" %>,Linux<% end -%>
<% end -%>
  #_graphiteprefix   monitoring
}
<% end -%>

<% #end -%>
